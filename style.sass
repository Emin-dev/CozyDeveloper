@use "sass:color"

$bg: #0f111a
$panel: #1e2235
$primary: #3b82f6
$success: #10b981
$danger: #ef4444
$gold: #f59e0b
$text: #ffffff

*
  box-sizing: border-box
  user-select: none
  -webkit-user-select: none
  touch-action: manipulation
  -webkit-tap-highlight-color: transparent

body
  margin: 0
  background: $bg
  color: $text
  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif
  height: 100vh
  height: 100dvh
  overflow: hidden

.game-over-screen
  position: fixed
  top: 0
  left: 0
  width: 100%
  height: 100%
  background: #0044aa
  z-index: 100
  display: flex
  align-items: center
  justify-content: center
  flex-direction: column
  color: white
  font-family: 'Courier New', monospace

.error-box
  text-align: center
  padding: 20px

  h1
    font-size: 5rem
    margin: 0
  
  h2
    background: white
    color: #0044aa
    padding: 5px
    display: inline-block

.reboot-btn
  margin-top: 30px
  background: white
  color: #0044aa
  border: none
  padding: 15px 30px
  font-size: 1.2rem
  font-weight: bold
  cursor: pointer
  font-family: inherit

  &:active
    opacity: 0.8

.game-layout
  display: grid
  grid-template-rows: auto auto 1fr auto
  height: 100%
  width: 100%
  max-width: 600px
  margin: 0 auto
  padding: 15px
  gap: 10px

.settings-bar
  display: flex
  justify-content: flex-end
  padding: 0 5px

.icon-btn
  background: rgba(255,255,255,0.1)
  border: none
  color: white
  font-size: 1.2rem
  padding: 8px
  border-radius: 50%
  cursor: pointer
  width: 40px
  height: 40px
  display: flex
  align-items: center
  justify-content: center
  
  &:active
    background: rgba(255,255,255,0.2)

.hud-panel
  background: $panel
  padding: 15px
  border-radius: 20px
  box-shadow: 0 8px 24px rgba(0,0,0,0.4)
  border: 1px solid rgba(255,255,255,0.05)

.level-title
  margin: 0 0 15px 0
  text-align: center
  font-size: 1.4rem
  font-weight: 900
  letter-spacing: 1px
  background: linear-gradient(90deg, #60a5fa, #a78bfa)
  -webkit-background-clip: text
  -webkit-text-fill-color: transparent

.stat-grid
  display: grid
  gap: 12px

.stat-item
  display: flex
  flex-direction: column
  gap: 5px

.stat-label
  display: flex
  justify-content: space-between
  font-size: 0.85rem
  font-weight: 700
  color: rgba(255,255,255,0.7)

.money-item .stat-label
  color: $gold
  font-size: 1rem

.progress-track
  height: 10px
  background: rgba(0,0,0,0.5)
  border-radius: 10px
  overflow: hidden

.progress-fill
  height: 100%
  width: 0%
  transition: width 0.2s ease-out 
  border-radius: 10px

.xp-fill
  background: $primary
.stress-fill
  background: $success

.character-stage
  position: relative
  display: flex
  align-items: center
  justify-content: center
  flex-direction: column
  overflow: hidden

.emoji-avatar
  font-size: 7rem
  filter: drop-shadow(0 0 30px rgba(96, 165, 250, 0.2))
  transition: transform 0.1s
  z-index: 2
  cursor: pointer

  &:active
    transform: scale(0.9)

.bubble
  position: absolute
  top: 10px
  background: $panel
  padding: 10px 20px
  border-radius: 15px
  font-size: 0.9rem
  opacity: 0
  transform: translateY(10px)
  transition: all 0.3s
  pointer-events: none
  border: 1px solid rgba(255,255,255,0.1)
  text-align: center
  max-width: 80%
  z-index: 5

  &.show
    opacity: 1
    transform: translateY(0)

.floater
  position: absolute
  font-weight: bold
  font-size: 1.2rem
  pointer-events: none
  animation: floatUp 0.8s ease-out forwards
  z-index: 10
  text-shadow: 0 2px 4px rgba(0,0,0,0.5)

@keyframes floatUp
  0%
    opacity: 1
    transform: translateY(0) scale(1)
  100%
    opacity: 0
    transform: translateY(-50px) scale(1.5)

@keyframes shake
  0% 
    transform: rotate(0deg)
  25% 
    transform: rotate(5deg)
  75% 
    transform: rotate(-5deg)
  100% 
    transform: rotate(0deg)

.control-panel
  display: flex
  flex-direction: column
  gap: 15px
  padding-bottom: env(safe-area-inset-bottom, 15px)

.action-row
  display: grid
  grid-template-columns: 1fr 1fr
  gap: 15px

.shop-row
  display: grid
  grid-template-columns: 1fr 1fr
  gap: 10px

.big-btn
  border: none
  border-radius: 20px
  padding: 15px
  display: flex
  flex-direction: column
  align-items: center
  justify-content: center
  gap: 5px
  cursor: pointer
  height: 90px
  position: relative
  overflow: hidden
  
  &:active
    transform: translateY(2px)

.code-btn
  background: linear-gradient(135deg, $primary, darken($primary, 10%))
  box-shadow: 0 4px 0 darken($primary, 20%)
  
  &:active
    box-shadow: none

.sleep-btn
  background: linear-gradient(135deg, $success, darken($success, 10%))
  box-shadow: 0 4px 0 darken($success, 20%)

  &:active
    box-shadow: none

.btn-icon
  font-size: 1.8rem
.btn-label
  font-weight: 900
  font-size: 1rem
  color: white
.btn-sub
  font-size: 0.7rem
  opacity: 0.8
  color: white

.shop-btn
  background: rgba(255,255,255,0.05)
  border: 1px solid rgba(255,255,255,0.1)
  border-radius: 12px
  padding: 10px
  display: flex 
  align-items: center
  gap: 10px
  cursor: pointer
  color: white
  transition: background 0.2s

  &:active
    background: rgba(255,255,255,0.1)

  &.disabled
    opacity: 0.4
    pointer-events: none

.shop-icon
  font-size: 1.5rem

.shop-info
  display: flex
  flex-direction: column
  align-items: flex-start

.shop-name
  font-size: 0.8rem
  font-weight: bold
.shop-cost
  font-size: 0.8rem
  color: $gold
